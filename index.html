<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–î–û–ë–†–û ‚Äî –ú—è—Å–Ω–∞—è –º–∞–Ω—É—Ñ–∞–∫—Ç—É—Ä–∞</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800;900&display=swap" rel="stylesheet">
    <style>
        :root { --bg: #000; --card: #111; --accent: #FF3B30; --text: #fff; --sec: #8E8E93; }
        body { font-family: 'Inter', sans-serif; background: var(--bg); color: var(--text); margin: 0; padding: 15px; padding-bottom: 120px; -webkit-font-smoothing: antialiased; }
        
        header { padding: 25px 0; border-bottom: 1px solid #222; margin-bottom: 15px; }
        .logo { font-weight: 900; font-size: 2.8rem; letter-spacing: -2px; margin: 0; }
        .tagline { color: var(--accent); text-transform: uppercase; font-size: 0.65rem; letter-spacing: 2px; font-weight: 700; }
        
        .item { background: var(--card); padding: 16px; border-radius: 18px; display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; border: 1px solid #222; }
        .item-info { flex: 1; }
        .item-name { font-weight: 600; font-size: 1rem; display: block; margin-bottom: 2px; }
        .item-price { color: var(--sec); font-size: 0.8rem; }

        .counter { display: flex; align-items: center; gap: 8px; background: #222; padding: 4px; border-radius: 12px; }
        .btn-c { background: none; border: none; color: #fff; width: 32px; height: 32px; font-size: 1.2rem; cursor: pointer; display: flex; align-items: center; justify-content: center; }
        .count-val { font-weight: 800; min-width: 25px; text-align: center; font-size: 1rem; }
        .btn-plus-init { background: var(--accent); border: none; color: #fff; padding: 10px 14px; border-radius: 12px; font-weight: 700; font-size: 0.85rem; }

        .footer-cart { position: fixed; bottom: 15px; left: 15px; right: 15px; background: #fff; color: #000; padding: 18px; border-radius: 22px; display: flex; justify-content: space-between; align-items: center; z-index: 1000; box-shadow: 0 10px 30px rgba(0,0,0,0.4); }
        .checkout-btn { background: #000; color: #fff; padding: 12px 20px; border-radius: 14px; border: none; font-weight: 800; text-transform: uppercase; font-size: 0.75rem; cursor: pointer; }

        #modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.98); z-index: 2000; overflow-y: auto; }
        .modal-content { padding: 30px 20px; width: 100%; max-width: 400px; margin: 0 auto; box-sizing: border-box; }
        
        .form-group { margin-bottom: 15px; }
        label { display: block; color: var(--sec); font-size: 0.7rem; margin-bottom: 6px; text-transform: uppercase; font-weight: 700; }
        input { width: 100%; padding: 14px; background: #1c1c1e; border: 1px solid #333; border-radius: 12px; color: #fff; box-sizing: border-box; font-size: 16px; outline: none; appearance: none; -webkit-appearance: none; }
        input:focus { border-color: var(--accent); }
        
        .side-by-side { display: flex; gap: 10px; }
        .side-by-side .form-group { flex: 1; margin-bottom: 0; }

        .submit-btn { background: var(--accent); color: #fff; border: none; width: 100%; padding: 18px; border-radius: 16px; font-weight: 800; font-size: 1rem; margin-top: 15px; cursor: pointer; transition: 0.3s; }
        .submit-btn:disabled { opacity: 0.2; cursor: not-allowed; }
        #time-error { color: var(--accent); font-size: 0.8rem; margin-top: 8px; font-weight: 600; line-height: 1.3; }
    </style>
</head>
<body>

<header>
    <div class="tagline">–ú—è—Å–Ω–∞—è –º–∞–Ω—É—Ñ–∞–∫—Ç—É—Ä–∞</div>
    <h1 class="logo">–î–û–ë–†–û</h1>
</header>

<div id="menu"></div>

<div class="footer-cart">
    <div>
        <div style="font-size: 0.6rem; font-weight: 800; color: #888; text-transform: uppercase;">–ò—Ç–æ–≥–æ –∫ –∑–∞–∫–∞–∑—É</div>
        <div style="font-weight: 900; font-size: 1.4rem;"><span id="total">0</span> BYN</div>
    </div>
    <button class="checkout-btn" onclick="toggleModal(true)">–û—Ñ–æ—Ä–º–∏—Ç—å</button>
</div>

<div id="modal">
    <div class="modal-content">
        <h2 style="font-weight: 900; font-size: 1.8rem; margin: 0 0 10px 0;">–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ</h2>
        <p style="color: var(--sec); font-size: 0.85rem; margin-bottom: 25px;">–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –¥–æ—Å—Ç–∞–≤–∫–∏</p>
        
        <div class="form-group"><label>–í–∞—à–µ –ò–º—è</label><input type="text" id="name" placeholder="–ò–º—è"></div>
        <div class="form-group"><label>–¢–µ–ª–µ—Ñ–æ–Ω</label><input type="tel" id="phone" value="+375 "></div>
        
        <div class="side-by-side">
            <div class="form-group"><label>–î–∞—Ç–∞</label><input type="date" id="date"></div>
            <div class="form-group"><label>–í—Ä–µ–º—è</label><input type="time" id="time"></div>
        </div>
        
        <div id="time-error"></div>
        <button class="submit-btn" id="sendBtn" onclick="sendToTelegram()">–ó–∞–∫–∞–∑–∞—Ç—å –≤ Telegram</button>
        <button onclick="toggleModal(false)" style="color:#888; background:none; border:none; width:100%; padding:20px; font-weight:600; cursor:pointer;">‚Üê –ù–∞–∑–∞–¥ –≤ –º–µ–Ω—é</button>
    </div>
</div>

<script>
    const products = [
        { n: "–†–≤–∞–Ω–∞—è –≥–æ–≤—è–¥–∏–Ω–∞", p: 85, u: "–∫–≥" },
        { n: "–ì–æ–≤—è–∂—å–∏ —â–µ—á–∫–∏", p: 110, u: "–∫–≥" },
        { n: "–ì–æ–≤—è–∂–∏–π —è–∑—ã–∫", p: 90, u: "–∫–≥" },
        { n: "–ë—É–∂–µ–Ω–∏–Ω–∞ (—à–µ—è)", p: 70, u: "–∫–≥" },
        { n: "–†—ë–±—Ä—ã—à–∫–∏ –º—è—Å–Ω—ã–µ", p: 65, u: "–∫–≥" },
        { n: "–†—ë–±—Ä—ã—à–∫–∏ –ø–ª–∞—Å—Ç–∏–Ω–∫–∏", p: 50, u: "–∫–≥" },
        { n: "–†—É–ª—å–∫–∞", p: 55, u: "–∫–≥" },
        { n: "–ò–Ω–¥–µ–π–∫–∞", p: 70, u: "–∫–≥" },
        { n: "–£—Ç–∫–∞ —Å —è–±–ª–æ–∫–∞–º–∏ (—Ü–µ–ª–∞—è)", p: 150, u: "—à—Ç (~2–∫–≥)", isWhole: true },
        { n: "–ö–æ–ª–±–∞—Å–∫–∏ –∫—É—Ä–∏–Ω—ã–µ", p: 60, u: "–∫–≥" },
        { n: "–ö–æ–ª–±–∞—Å–∫–∏ —Å —á–µ–¥–¥–µ—Ä–æ–º", p: 70, u: "–∫–≥" },
        { n: "–ö—É—Ä–∏—Ü–∞ (–±–µ–¥—Ä–æ/–≥–æ–ª–µ–Ω—å)", p: 60, u: "–∫–≥" }
    ];

    let cart = {};
    const menu = document.getElementById('menu');
    const phoneInput = document.getElementById('phone');
    const dateInp = document.getElementById('date');
    const timeInp = document.getElementById('time');

    // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–∞–ª–µ–Ω–¥–∞—Ä—è
    const now = new Date();
    dateInp.min = now.toISOString().split("T")[0];

    // –ú–∞—Å–∫–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ +375 (XX) XXX-XX-XX
    phoneInput.addEventListener('input', (e) => {
        let val = e.target.value.replace(/\D/g, '');
        let x = val.match(/(\d{0,3})(\d{0,2})(\d{0,3})(\d{0,2})(\d{0,2})/);
        if (!x[1]) { e.target.value = '+375 '; return; }
        e.target.value = '+375 ' + (x[2] ? '(' + x[2] : '') + (x[2].length === 2 ? ') ' : '') + x[3] + (x[4] ? '-' + x[4] : '') + (x[5] ? '-' + x[5] : '');
    });

    phoneInput.addEventListener('keydown', (e) => {
        if (e.key === 'Backspace' && e.target.value.length <= 5) e.preventDefault();
    });

    function renderMenu() {
        menu.innerHTML = "";
        products.forEach(item => {
            const count = cart[item.n] || 0;
            const div = document.createElement('div');
            div.className = 'item';
            div.innerHTML = `
                <div class="item-info">
                    <span class="item-name">${item.n}</span>
                    <span class="item-price">${item.p} BYN –∑–∞ ${item.u}</span>
                </div>
                ${count === 0 
                    ? `<button class="btn-plus-init" onclick="updateCart('${item.n}', 1)">–î–æ–±–∞–≤–∏—Ç—å</button>`
                    : `<div class="counter">
                        <button class="btn-c" onclick="updateCart('${item.n}', -1)">‚àí</button>
                        <span class="count-val">${count}</span>
                        <button class="btn-c" onclick="updateCart('${item.n}', 1)">+</button>
                       </div>`
                }
            `;
            menu.appendChild(div);
        });
        updateTotal();
    }

    function updateCart(name, delta) {
        cart[name] = (cart[name] || 0) + delta;
        if (cart[name] <= 0) delete cart[name];
        renderMenu();
    }

    function updateTotal() {
        let t = 0;
        products.forEach(p => { if(cart[p.n]) t += cart[p.n] * p.p; });
        document.getElementById('total').innerText = t;
    }

    function toggleModal(s) {
        if(document.getElementById('total').innerText == "0" && s) return alert("–í—ã–±–µ—Ä–∏—Ç–µ —Ç–æ–≤–∞—Ä—ã!");
        document.getElementById('modal').style.display = s ? 'block' : 'none';
        document.body.style.overflow = s ? 'hidden' : 'auto';
    }

    function validateDateTime() {
        const selectedDate = new Date(dateInp.value);
        const selectedTime = timeInp.value;
        const err = document.getElementById('time-error');
        const btn = document.getElementById('sendBtn');
        const day = selectedDate.getDay(); 
        const todayStr = now.toISOString().split("T")[0];
        
        let msg = "";
        const monthDay = `${selectedDate.getMonth() + 1}-${selectedDate.getDate()}`;
        const holidays = ['1-1', '1-2', '1-7', '3-8', '5-1', '5-9', '7-3', '11-7', '12-25']; 
        
        if (holidays.includes(monthDay)) {
            msg = "–≠—Ç–æ—Ç –¥–µ–Ω—å –ø—Ä–∞–∑–¥–Ω–∏—á–Ω—ã–π, –º—ã –æ—Ç–¥—ã—Ö–∞–µ–º.";
        } else if (day === 0) {
            msg = "–í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ ‚Äî –≤—ã—Ö–æ–¥–Ω–æ–π.";
        } else if (selectedTime) {
            const h = parseInt(selectedTime.split(':')[0]);
            const m = parseInt(selectedTime.split(':')[1]);
            const timeVal = h + m/60;

            if (day >= 1 && day <= 5) {
                if (timeVal < 10 || timeVal >= 18) msg = "–ë—É–¥–Ω–∏: —Ä–∞–±–æ—Ç–∞–µ–º —Å 10:00 –¥–æ 18:00";
            } else if (day === 6) {
                if (timeVal < 10 || timeVal >= 17) msg = "–°—É–±–±–æ—Ç–∞: —Ä–∞–±–æ—Ç–∞–µ–º —Å 10:00 –¥–æ 17:00";
            }

            if (dateInp.value === todayStr) {
                if (h < now.getHours() || (h === now.getHours() && m <= now.getMinutes())) {
                    msg = "–ù–µ–ª—å–∑—è –∑–∞–∫–∞–∑–∞—Ç—å –Ω–∞ –ø—Ä–æ—à–µ–¥—à–µ–µ –≤—Ä–µ–º—è.";
                }
            }
        }

        err.innerText = msg ? "‚ö†Ô∏è " + msg : "";
        btn.disabled = msg !== "";
    }

    dateInp.addEventListener('change', validateDateTime);
    timeInp.addEventListener('change', validateDateTime);

    async function sendToTelegram() {
        const name = document.getElementById('name').value;
        const phone = document.getElementById('phone').value;
        const d = dateInp.value;
        const t = timeInp.value;
        
        if(!name || phone.length < 18 || !d || !t) return alert("–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –¥–∞–Ω–Ω—ã–µ!");

        let orderNum = localStorage.getItem('orderCounter') || 1;
        let formattedNum = String(orderNum).padStart(3, '0');

        let orderList = "";
        for (let n in cart) {
            const p = products.find(x => x.n === n);
            orderList += `‚Ä¢ ${n}: ${cart[n]} ${p.isWhole?'—à—Ç':'–∫–≥'} x ${p.p}—Ä\n`;
        }

        const message = `üßæ –ß–ï–ö ‚Ññ${formattedNum}\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\nüë§ –ö–ª–∏–µ–Ω—Ç: ${name}\nüìû –¢–µ–ª: ${phone}\nüìÖ –î–∞—Ç–∞: ${d}\n‚è∞ –í—Ä–µ–º—è: ${t}\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\nüõí –°–æ—Å—Ç–∞–≤:\n${orderList}\nüí∞ –ò–¢–û–ì–û: ${document.getElementById('total').innerText} BYN`;

        const token = "8508146270:AAGZnNkbZKwlUCep5Qti5L-ES4R-C5khvT0";
        const chatId = "-1003698576143";

        try {
            const res = await fetch(`https://api.telegram.org/bot${token}/sendMessage`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ chat_id: chatId, text: message })
            });
            if(res.ok) {
                localStorage.setItem('orderCounter', parseInt(orderNum) + 1);
                alert("–ó–∞–∫–∞–∑ ‚Ññ" + formattedNum + " –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω!");
                location.reload();
            }
        } catch (e) { alert("–û—à–∏–±–∫–∞ —Å–≤—è–∑–∏ —Å Telegram!"); }
    }

    renderMenu();
</script>
</body>
</html>